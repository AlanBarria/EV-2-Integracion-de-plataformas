{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>CRUD Herramientas</title>
</head>
<body>

<h1>AdministraciÃ³n de Herramientas</h1>

<!-- Mostrar mensajes -->
{% if messages %}
    <ul>
        {% for message in messages %}
            <li style="color: {% if message.tags == 'success' %}green{% else %}red{% endif %};">
                {{ message }}
            </li>
        {% endfor %}
    </ul>
{% endif %}

<!-- Formulario -->
<h2>{% if form.instance.pk %}Editar{% else %}Crear{% endif %} Herramienta</h2>
<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form.as_p }}
    {% if form.instance.pk %}
        <input type="hidden" name="editar_id" value="{{ form.instance.pk }}">
    {% endif %}
    <button type="submit">Guardar</button>
</form>

<!-- Vista previa de imagen actual -->
{% if herramienta_editada and herramienta_editada.imagen %}
    <p>Imagen actual:</p>
    <img src="{{ herramienta_editada.imagen.url }}" width="150">
{% endif %}

<!-- Lista de herramientas -->
<h2>Herramientas registradas</h2>
<ul>
    {% for herramienta in herramientas %}
        <li>
            {{ herramienta.nombre }} - ${{ herramienta.precio }} (Stock: {{ herramienta.stock }})
            {% if herramienta.imagen %}
                <br><img src="{{ herramienta.imagen.url }}" width="100">
            {% endif %}
            <br>
            <a href="?editar_id={{ herramienta.id }}">Editar</a> |
            <a href="?eliminar_id={{ herramienta.id }}" onclick="return confirm('Â¿Eliminar herramienta?');">Eliminar</a>
        </li>
    {% endfor %}
</ul>

</body>
</html>
